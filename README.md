![Header](https://capsule-render.vercel.app/api?type=rect&color=0D1B2A&height=100&text=Causal%20Synth%20Engine&fontSize=36&fontColor=A78BFA)

<div align="center">

**A research-derived market simulator for private equity vendor consolidation**

![Python](https://img.shields.io/badge/Python-3.11+-A3B8CC?style=flat-square)
![Pandas](https://img.shields.io/badge/Pandas-Data_Generation-A3B8CC?style=flat-square)
![LLM](https://img.shields.io/badge/LLM-Web_Research-A78BFA?style=flat-square)

</div>

---

> Built a market simulator by extracting mechanistic relationships from industry reports, vendor analysis, and operational research—encoding how integration quality drives acquisition value and how vendor consolidation affects pricing dynamics into deterministic graph topology.

## The Problem: Cold-Start Scarcity

Private equity data is **private, fragmented, and sparse**. PE firms pay consultants $1M/year to manually gather vendor intelligence that doesn't exist in public datasets.

**Why random synthetic data fails:**
- Model memorizes correlations that don't exist in reality
- No causal structure → can't generalize
- Predictions are statistically valid but operationally useless

## The Solution: Causal Market Modeling

Instead of generating random data, we:

1. **Extract real mechanisms** via LLM web research (Claude/GPT with live internet)
2. **Encode mechanisms** into deterministic generation rules
3. **Generate data** that obeys the causal structure

### The Key Mechanism

```
Integration Quality → Acquisition Value → Vendor Switching
```

| Integration Quality | Friction | Switching Probability |
|---------------------|----------|----------------------|
| Full API (2) | Low | Low |
| Partial CSV (1) | Medium | Medium |
| None (0) | High | High |

**This mechanism is encoded into the generators. The downstream ML model must discover it to succeed.**

## Three-Stage Pipeline

```
┌────────────────────────────────────────────────────────┐
│  STAGE 1: LLM-as-RESEARCHER                            │
│  Models: Claude Opus, Sonnet, ChatGPT Pro              │
│  Task: Research 20 real dental vendors                 │
│  Output: Raw markdown findings                         │
└────────────────────────────────────────────────────────┘
                         │
                         ▼
┌────────────────────────────────────────────────────────┐
│  STAGE 2: LLM-as-ANALYST                               │
│  Task: Cross-vendor pattern discovery                  │
│  Finding: "ALL Lab vendors use CSV portals"            │
│  Output: text_features.json (~450 triples)             │
└────────────────────────────────────────────────────────┘
                         │
                         ▼
┌────────────────────────────────────────────────────────┐
│  STAGE 3: PYTHON GENERATORS                            │
│  Task: Encode discovered rules, generate instances     │
│  Output: 6 CSV files (100 sites, 866 contracts)        │
└────────────────────────────────────────────────────────┘
```

## Discovered Category Rules

These patterns were **discovered from web research**, not assumed:

| Category | Integration Pattern | Evidence |
|----------|---------------------|----------|
| Lab | ALL partial_csv | STL file uploads, portal workflows |
| Telephony | ALL full_api | Call Pop requires real-time sync |
| Scheduling | ALL full_api | Self-booking requires real-time sync |
| RCM | Tier-dependent | Premium vendors have better integrations |

## Validation

Data generated by this engine was used to train an R-GCN model that achieved:

| Metric | Value |
|--------|-------|
| **PR-AUC** | **0.9407** |
| Risk MAE | 1.14 days |
| ECE | 0.0000 (perfect calibration) |

**Critical ablation:** Removing `integration_quality` caused **-25.5% PR-AUC drop**, proving the model learned the causal mechanism.

See [pe-rollup-gnn](https://github.com/ges257/pe-rollup-gnn) for the ML model and dashboard.

## Project Structure

```
causal-synth-engine/
├── src/
│   ├── generate_all_data.py          # Master orchestration
│   ├── generate_sites.py             # 100 synthetic practices
│   ├── generate_vendors.py           # 20 real vendors
│   ├── generate_integration_matrix.py # Causal mechanism encoding
│   ├── generate_initial_state.py     # Initial contract states
│   ├── simulate_switches.py          # Vendor switching simulation
│   └── generate_kpis.py              # KPI generation
├── research/
│   ├── prompts/                       # LLM research prompts
│   └── results/                       # LLM research outputs
├── outputs/                           # Generated CSVs
└── docs/
    └── METHODOLOGY.md                 # Full pipeline documentation
```

## Usage

```bash
# Generate all synthetic data
python src/generate_all_data.py --output outputs/

# Generate specific components
python src/generate_sites.py
python src/generate_vendors.py
python src/generate_integration_matrix.py
python src/simulate_switches.py
python src/generate_kpis.py
```

## Three-Layer Data Ontology

| Layer | Status | Examples |
|-------|--------|----------|
| **Structure** | Real | 20 real vendors (National Dentex, Weave, DentalXChange) |
| **Parameters** | Web-Grounded | Integration patterns from vendor docs and user reviews |
| **Instances** | Generated | 100 synthetic practices, 866 contracts |

## License

MIT

---

<div align="center">

**Part of the PE Rollup Intelligence System**

[pe-rollup-gnn](https://github.com/ges257/pe-rollup-gnn) • [Profile](https://github.com/ges257)

</div>
